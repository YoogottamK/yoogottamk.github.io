let $output,$prompt,$error,cwd="/";const routes={"/":["/blog/","/projects/","/about/"],"/about/":[],"/blog/":["/blog/managing-path","/blog/under-construction"],"/projects/":["/projects/under-construction","/projects/c-shell"]},helpStrings={ls:"Usage: ls [dir]\nList the files in a directory\nDefaults to current directory\nTakes absolute and relative paths\n",cd:"Usage: cd [dir]\nChange the current directory to dir\nDefaults to root directory\nTakes absolute and relative paths\n",cat:"Usage: cat file\nView a page on this website\nTakes absolute and relative paths\n",clear:"Usage: clear\nClears the screen\n",help:"Usage: help [cmd]\nDisplay help on cmd or show help for all commands\n"},root=cwd;function ls(t){switch(t||(t=cwd),t){case".":t=cwd;break;case"..":t=cwd.slice(0,-1).split("/").slice(0,-1).join("/")||root;break;default:if("/"!=t[0]&&(t=cwd+t),t+"/"in routes&&(t+="/"),!(t in routes))return"Error! No such directory exists"}return $output.text(routes[t].map(t=>t.replace(cwd,"")).join("\n")),0}function cd(t){switch(t||(t=root),t){case".":t=cwd;break;case"..":t=cwd.slice(0,-1).split("/").slice(0,-1).join("/")||root;break;default:if(t.startsWith(".."))return cd(".."),cd(t.slice(3));if(t.startsWith("./")){for(;t.startsWith("./");)t=t.slice(2);return cd(t)}if("/"!=t[0]&&(t=cwd+t),t+"/"in routes&&(t+="/"),!(t in routes))return`Error! "${t}": No such directory exists`}return t.length<root.length&&(t=root),cwd=t,routes[cwd].length||(window.location.href=cwd),$prompt.text(cwd),0}function cat(t){if(!t)return"Error! Please specify a file";let e="/"==t[0];return t.includes("/")&&(e&&cd(),t.split("/").filter(t=>t).slice(0,-1).forEach(t=>cd(t)),t=t.split("/").pop()),routes[cwd].includes(cwd+t)?(window.location.href=cwd+t,0):`Error! "${t}": No such file exists`}function help(t){if(t in helpStrings)$output.text(helpStrings[t]);else{let e="";for(t in helpStrings)e+=t+"\n"+helpStrings[t]+"\n";$output.text(e)}}function clear(){$output.text(""),$error.text("")}const functionMap={ls:ls,cd:cd,cat:cat,clear:clear,help:help};function handleCommand(t){t.preventDefault();let e=$("#cli"),r=e.val(),o="";if(""==r)return;clear();let[n,c]=[...r.split(" ")];e.val(""),o=n in functionMap?functionMap[n](c):`Error! "${n}": No such command exists.\nRun 'help' to know more`,o&&$error.text(o)}function init(){$output=$("#terminal-output"),$prompt=$("#prompt"),$error=$("#terminal-error"),$("#cli-form").submit(handleCommand),$("#cli").focus()}document.addEventListener("DOMContentLoaded",init);